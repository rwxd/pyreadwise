{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Python Module to use the Readwise API","text":"<p>This module is a wrapper for the Readwise API.</p> <p>It allows you to easily access your Readwise data in Python.</p>"},{"location":"#installation","title":"Installation","text":"<pre><code>pip install -U readwise\n</code></pre>"},{"location":"#how-to-use","title":"How to use","text":""},{"location":"#readwise-api","title":"Readwise API","text":"<pre><code>from readwise import Readwise\nclient = Readwise('token')\nbooks = client.get_books(category='articles')\nfor book in books:\nhighlights = client.get_book_highlights(book.id)\nif len(highlights) &gt; 0:\nprint(book.title)\nfor highlight in highlights:\nprint(highlight.text)\n</code></pre>"},{"location":"#readwise-readwise-api","title":"Readwise Readwise API","text":"<pre><code>from readwise import ReadwiseReader\nclient = ReadwiseReader('token')\nresponse = client.create_document('https://www.example.com')\nresponse.raise_for_status()\n</code></pre>"},{"location":"#documentation","title":"Documentation","text":"<p>The latest documentation can be found at https://rwxd.github.io/pyreadwise/</p> <p>If you've checked out the source code (for example to review a PR), you can build the latest documentation by running <code>make serve-docs</code>.</p>"},{"location":"advanced-usage/","title":"Advanced Usage","text":""},{"location":"advanced-usage/#custom-request","title":"Custom request","text":"<p>You can use the <code>get</code>, <code>post</code>, <code>delete</code> or <code>request</code> methods to make a custom request.</p> <pre><code>from readwise import Readwise\nclient = Readwise('token')\nresponse = client.get('/books/', params={'category': 'articles'})\nresponse.raise_for_status()\nprint(response.json())\n</code></pre> <p>Custom http method</p> <pre><code>from readwise import Readwise\nclient = Readwise('token')\nresponse = client.request('get', '/books/', params={'category': 'articles'})\nresponse.raise_for_status()\nprint(response.json())\n</code></pre>"},{"location":"advanced-usage/#pagination","title":"Pagination","text":"<p>A helper method for pagination is available.</p> <pre><code>from readwise import Readwise\nclient = Readwise('token')\nfor response in client.get_pagination('/books/', params={'category': 'articles'}):\nresponse.raise_for_status()\nfor book in response.json()['results']:\nprint(book)\n</code></pre>"},{"location":"models/","title":"Models","text":""},{"location":"models/#readwise.models.ReadwiseBook","title":"<code>ReadwiseBook</code>  <code>dataclass</code>","text":"<p>Represents a Readwise book.</p> <p>Attributes:</p> Name Type Description <code>id</code> <code>str</code> <p>The book's ID.</p> <code>title</code> <code>str</code> <p>The book's title.</p> <code>author</code> <code>str</code> <p>The book's author.</p> <code>category</code> <code>str</code> <p>The book's category.</p> <code>source</code> <code>str</code> <p>The book's source.</p> <code>num_highlights</code> <code>int</code> <p>The number of highlights for the book.</p> <code>last_highlight_at</code> <code>datetime | None</code> <p>The date and time of the last highlight for the book.</p> <code>updated</code> <code>datetime | None</code> <p>The date and time the book was last updated.</p> <code>cover_image_url</code> <code>str</code> <p>The URL of the book's cover image.</p> <code>highlights_url</code> <code>str</code> <p>The URL of the book's highlights.</p> <code>source_url</code> <code>str</code> <p>The URL of the book's source.</p> <code>asin</code> <code>str</code> <p>The book's ASIN.</p> <code>tags</code> <code>list[ReadwiseTag]</code> <p>The book's tags.</p> <code>document_note</code> <code>str</code> <p>The book's document note.</p> Source code in <code>readwise/models.py</code> <pre><code>@dataclass\nclass ReadwiseBook:\n'''\n    Represents a Readwise book.\n    Attributes:\n        id: The book's ID.\n        title: The book's title.\n        author: The book's author.\n        category: The book's category.\n        source: The book's source.\n        num_highlights: The number of highlights for the book.\n        last_highlight_at: The date and time of the last highlight for the book.\n        updated: The date and time the book was last updated.\n        cover_image_url: The URL of the book's cover image.\n        highlights_url: The URL of the book's highlights.\n        source_url: The URL of the book's source.\n        asin: The book's ASIN.\n        tags: The book's tags.\n        document_note: The book's document note.\n    '''\nid: str\ntitle: str\nauthor: str\ncategory: str\nsource: str\nnum_highlights: int\nlast_highlight_at: datetime | None\nupdated: datetime | None\ncover_image_url: str\nhighlights_url: str\nsource_url: str\nasin: str\ntags: list[ReadwiseTag]\ndocument_note: str\n</code></pre>"},{"location":"models/#readwise.models.ReadwiseHighlight","title":"<code>ReadwiseHighlight</code>  <code>dataclass</code>","text":"<p>Represents a Readwise highlight.</p> <p>Attributes:</p> Name Type Description <code>id</code> <code>str</code> <p>The highlight's ID.</p> <code>text</code> <code>str</code> <p>The highlight's text.</p> <code>note</code> <code>str</code> <p>The highlight's note.</p> <code>location</code> <code>int</code> <p>The highlight's location.</p> <code>location_type</code> <code>str</code> <p>The highlight's location type.</p> <code>url</code> <code>str | None</code> <p>The highlight's URL.</p> <code>color</code> <code>str</code> <p>The highlight's color.</p> <code>updated</code> <code>datetime | None</code> <p>The date and time the highlight was last updated.</p> <code>book_id</code> <code>str</code> <p>The ID of the book the highlight is from.</p> <code>tags</code> <code>list[ReadwiseTag]</code> <p>The highlight's tags.</p> Source code in <code>readwise/models.py</code> <pre><code>@dataclass\nclass ReadwiseHighlight:\n'''\n    Represents a Readwise highlight.\n    Attributes:\n        id: The highlight's ID.\n        text: The highlight's text.\n        note: The highlight's note.\n        location: The highlight's location.\n        location_type: The highlight's location type.\n        url: The highlight's URL.\n        color: The highlight's color.\n        updated: The date and time the highlight was last updated.\n        book_id: The ID of the book the highlight is from.\n        tags: The highlight's tags.\n    '''\nid: str\ntext: str\nnote: str\nlocation: int\nlocation_type: str\nurl: str | None\ncolor: str\nupdated: datetime | None\nbook_id: str\ntags: list[ReadwiseTag]\n</code></pre>"},{"location":"models/#readwise.models.ReadwiseTag","title":"<code>ReadwiseTag</code>  <code>dataclass</code>","text":"<p>Represents a Readwise tag.</p> <p>Attributes:</p> Name Type Description <code>id</code> <code>str</code> <p>The tag's ID.</p> <code>name</code> <code>str</code> <p>The tag's name.</p> Source code in <code>readwise/models.py</code> <pre><code>@dataclass\nclass ReadwiseTag:\n'''Represents a Readwise tag.\n    Attributes:\n        id: The tag's ID.\n        name: The tag's name.\n    '''\nid: str\nname: str\n</code></pre>"},{"location":"readwise-api/","title":"Readwise API","text":"Source code in <code>readwise/api.py</code> <pre><code>class Readwise:\ndef __init__(\nself,\ntoken: str,\n):\n'''\n        Initialize a Readwise API client.\n        Documentation for the Readwise API can be found here:\n        https://readwise.io/api_deets\n        Args:\n            token: Readwise API token\n        '''\nself._token = token\nself._url = 'https://readwise.io/api/v2'\n@property\ndef _session(self) -&gt; requests.Session:\n'''\n        Return a requests.Session object with the Readwise API token set as an\n        Authorization header.\n        '''\nsession = requests.Session()\nsession.headers.update(\n{\n'Accept': 'application/json',\n'Authorization': f'Token {self._token}',\n}\n)\nreturn session\ndef _request(\nself, method: str, endpoint: str, params: dict = {}, data: dict = {}\n) -&gt; requests.Response:\n'''\n        Make a request to the Readwise API.\n        The Readwise API has a rate limit of 240 requests per minute. This\n        method will raise a ReadwiseRateLimitException if the rate limit is\n        exceeded.\n        The Exception will be raised after 8 retries with exponential backoff.\n        Args:\n            method: HTTP method\n            endpoint: API endpoint\n            params: Query parameters\n            data: Request body\n        Returns:\n            requests.Response\n        '''\nurl = self._url + endpoint\nlogging.debug(f'Calling \"{method}\" on \"{url}\" with params: {params}')\nresponse = self._session.request(method, url, params=params, json=data)\nwhile response.status_code == 429:\nseconds = int(response.headers['Retry-After'])\nlogging.warning(f'Rate limited by Readwise, retrying in {seconds} seconds')\nsleep(seconds)\nresponse = self._session.request(method, url, params=params, data=data)\nresponse.raise_for_status()\nreturn response\ndef get(self, endpoint: str, params: dict = {}) -&gt; requests.Response:\n'''\n        Make a GET request to the Readwise API.\n        Examples:\n            &gt;&gt;&gt; client.get('/highlights/')\n        Args:\n            endpoint: API endpoint\n            params: Query parameters\n        Returns:\n            requests.Response\n        '''\nlogging.debug(f'Getting \"{endpoint}\" with params: {params}')\nreturn self._request('GET', endpoint, params=params)\ndef get_with_limit_20(self, endpoint: str, params: dict = {}) -&gt; requests.Response:\n'''\n        Get a response from the Readwise API with a rate limit of 20 requests\n        per minute.\n        The rate limit of 20 requests per minute needs to be used at the\n        endpoints /highlights/ and /books/ because they return a lot of data.\n        Args:\n            endpoint: API endpoint\n            params: Query parameters\n        Returns:\n            requests.Response\n        '''\nreturn self.get(endpoint, params)\ndef post(self, endpoint: str, data: dict = {}) -&gt; requests.Response:\n'''\n        Make a POST request to the Readwise API.\n        Examples:\n            &gt;&gt;&gt; client.post('/highlights/', {'highlights': [{'text': 'foo'}]})\n        Args:\n            endpoint: API endpoint\n            data: Request body\n        Returns:\n            requests.Response\n        '''\nurl = self._url + endpoint\nlogging.debug(f'Posting \"{url}\" with data: {data}')\nresponse = self._request('POST', endpoint, data=data)\nresponse.raise_for_status()\nreturn response\ndef delete(self, endpoint: str) -&gt; requests.Response:\n'''\n        Make a DELETE request to the Readwise API.\n        Examples:\n            &gt;&gt;&gt; client.delete('/highlights/1234')\n        Args:\n            endpoint: API endpoint\n        Returns:\n            requests.Response\n        '''\nlogging.debug(f'Deleting \"{endpoint}\"')\nreturn self._request('DELETE', endpoint)\ndef get_pagination(\nself, endpoint: str, params: dict = {}\n) -&gt; Generator[dict, None, None]:\n'''\n        Get a response from the Readwise API with pagination.\n        Args:\n            endpoint: API endpoint\n            params: Query parameters\n        Yields:\n            Response data\n        '''\nyield from self._get_pagination('get', endpoint, params)\ndef get_pagination_limit_20(\nself, endpoint: str, params: dict = {}, page_size: int = 1000\n) -&gt; Generator[dict, None, None]:\n'''\n        Get a response from the Readwise API with pagination and a rate limit\n        of 20 requests per minute.\n        Args:\n            endpoint: API endpoint\n            params: Query parameters\n            page_size: Number of items per page\n        Yields:\n            Response data\n        '''\nyield from self._get_pagination(\n'get_with_limit_20', endpoint, params, page_size\n)\ndef _get_pagination(\nself,\nget_method: Literal['get', 'get_with_limit_20'],\nendpoint: str,\nparams: dict = {},\npage_size: int = 1000,\n) -&gt; Generator[dict, None, None]:\n'''\n        Get a response from the Readwise API with pagination.\n        Args:\n            get_method: Method to use for making requests\n            endpoint: API endpoint\n            params: Query parameters\n            page_size: Number of items per page\n        Yields:\n            dict: Response data\n        '''\npage = 1\nwhile True:\nresponse = getattr(self, get_method)(\nendpoint, params={'page': page, 'page_size': page_size, **params}\n)\ndata = response.json()\nyield data\nif type(data) == list or not data.get('next'):\nbreak\npage += 1\ndef get_books(\nself, category: Literal['articles', 'books', 'tweets', 'podcasts']\n) -&gt; Generator[ReadwiseBook, None, None]:\n'''\n        Get all Readwise books.\n        Args:\n            category: Book category\n        Returns:\n            A generator of ReadwiseBook objects\n        '''\nfor data in self.get_pagination_limit_20(\n'/books/', params={'category': category}\n):\nfor book in data['results']:\nyield ReadwiseBook(\nid=book['id'],\ntitle=book['title'],\nauthor=book['author'],\ncategory=book['category'],\nsource=book['source'],\nnum_highlights=book['num_highlights'],\nlast_highlight_at=datetime.fromisoformat(book['last_highlight_at'])\nif book['last_highlight_at']\nelse None,\nupdated=datetime.fromisoformat(book['updated'])\nif book['updated']\nelse None,\ncover_image_url=book['cover_image_url'],\nhighlights_url=book['highlights_url'],\nsource_url=book['source_url'],\nasin=book['asin'],\ntags=[\nReadwiseTag(id=tag['id'], name=tag['name'])\nfor tag in book['tags']\n],\ndocument_note=book['document_note'],\n)\ndef get_book_highlights(\nself, book_id: str\n) -&gt; Generator[ReadwiseHighlight, None, None]:\n'''\n        Get all highlights for a Readwise book.\n        Args:\n            book_id: Readwise book ID\n        Returns:\n            A generator of ReadwiseHighlight objects\n        '''\nfor data in self.get_pagination_limit_20(\n'/highlights/', params={'book_id': book_id}\n):\nfor highlight in data['results']:\nyield ReadwiseHighlight(\nid=highlight['id'],\ntext=highlight['text'],\nnote=highlight['note'],\nlocation=highlight['location'],\nlocation_type=highlight['location_type'],\nurl=highlight['url'],\ncolor=highlight['color'],\nupdated=datetime.fromisoformat(highlight['updated'])\nif highlight['updated']\nelse None,\nbook_id=highlight['book_id'],\ntags=[\nReadwiseTag(id=tag['id'], name=tag['name'])\nfor tag in highlight['tags']\n],\n)\ndef create_highlight(\nself,\ntext: str,\ntitle: str,\nauthor: str | None = None,\nhighlighted_at: datetime | None = None,\nsource_url: str | None = None,\ncategory: str = 'articles',\nnote: str | None = None,\n):\n'''\n        Create a Readwise highlight.\n        Args:\n            text: Highlight text\n            title: Book title\n            author: Book author\n            highlighted_at: Date and time the highlight was created\n            source_url: URL of the book\n            category: Book category\n            note: Highlight note\n        '''\npayload = {'text': text, 'title': title, 'category': category}\nif author:\npayload['author'] = author\nif highlighted_at:\npayload['highlighted_at'] = highlighted_at.isoformat()\nif source_url:\npayload['source_url'] = source_url\nif note:\npayload['note'] = note\nself.post('/highlights/', {'highlights': [payload]})\ndef get_book_tags(self, book_id: str) -&gt; Generator[ReadwiseTag, None, None]:\n'''\n        Get all tags for a Readwise book.\n        Args:\n            book_id: Readwise book ID\n        Returns:\n            A generator of ReadwiseTag objects\n        '''\nfor data in self.get_pagination_limit_20(\nf'/books/{book_id}/tags/', params={'book_id': book_id}\n):\nfor tag in data:\nyield ReadwiseTag(id=tag['id'], name=tag['name'])\ndef add_tag(self, book_id: str, tag: str):\n'''\n        Add a tag to a Readwise book.\n        Args:\n            book_id: Readwise book ID\n            tag: Tag name\n        Returns:\n            requests.Response\n        '''\nlogging.debug(f'Adding tag \"{tag}\" to book \"{book_id}\"')\npayload = {'name': tag}\nself.post(f'/books/{book_id}/tags/', payload)\ndef delete_tag(self, book_id: str, tag_id: str):\n'''\n        Delete a tag from a Readwise book.\n        Args:\n            book_id: Readwise book ID\n        Returns:\n            requests.Response\n        '''\nlogging.debug(f'Deleting tag \"{tag_id}\"')\nself.delete(f'/books/{book_id}/tags/{tag_id}')\n</code></pre>"},{"location":"readwise-api/#readwise.api.Readwise.__init__","title":"<code>__init__(token)</code>","text":"<p>Initialize a Readwise API client.</p> <p>Documentation for the Readwise API can be found here: https://readwise.io/api_deets</p> <p>Parameters:</p> Name Type Description Default <code>token</code> <code>str</code> <p>Readwise API token</p> required Source code in <code>readwise/api.py</code> <pre><code>def __init__(\nself,\ntoken: str,\n):\n'''\n    Initialize a Readwise API client.\n    Documentation for the Readwise API can be found here:\n    https://readwise.io/api_deets\n    Args:\n        token: Readwise API token\n    '''\nself._token = token\nself._url = 'https://readwise.io/api/v2'\n</code></pre>"},{"location":"readwise-api/#readwise.api.Readwise.add_tag","title":"<code>add_tag(book_id, tag)</code>","text":"<p>Add a tag to a Readwise book.</p> <p>Parameters:</p> Name Type Description Default <code>book_id</code> <code>str</code> <p>Readwise book ID</p> required <code>tag</code> <code>str</code> <p>Tag name</p> required <p>Returns:</p> Type Description <p>requests.Response</p> Source code in <code>readwise/api.py</code> <pre><code>def add_tag(self, book_id: str, tag: str):\n'''\n    Add a tag to a Readwise book.\n    Args:\n        book_id: Readwise book ID\n        tag: Tag name\n    Returns:\n        requests.Response\n    '''\nlogging.debug(f'Adding tag \"{tag}\" to book \"{book_id}\"')\npayload = {'name': tag}\nself.post(f'/books/{book_id}/tags/', payload)\n</code></pre>"},{"location":"readwise-api/#readwise.api.Readwise.create_highlight","title":"<code>create_highlight(text, title, author=None, highlighted_at=None, source_url=None, category='articles', note=None)</code>","text":"<p>Create a Readwise highlight.</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>Highlight text</p> required <code>title</code> <code>str</code> <p>Book title</p> required <code>author</code> <code>str | None</code> <p>Book author</p> <code>None</code> <code>highlighted_at</code> <code>datetime | None</code> <p>Date and time the highlight was created</p> <code>None</code> <code>source_url</code> <code>str | None</code> <p>URL of the book</p> <code>None</code> <code>category</code> <code>str</code> <p>Book category</p> <code>'articles'</code> <code>note</code> <code>str | None</code> <p>Highlight note</p> <code>None</code> Source code in <code>readwise/api.py</code> <pre><code>def create_highlight(\nself,\ntext: str,\ntitle: str,\nauthor: str | None = None,\nhighlighted_at: datetime | None = None,\nsource_url: str | None = None,\ncategory: str = 'articles',\nnote: str | None = None,\n):\n'''\n    Create a Readwise highlight.\n    Args:\n        text: Highlight text\n        title: Book title\n        author: Book author\n        highlighted_at: Date and time the highlight was created\n        source_url: URL of the book\n        category: Book category\n        note: Highlight note\n    '''\npayload = {'text': text, 'title': title, 'category': category}\nif author:\npayload['author'] = author\nif highlighted_at:\npayload['highlighted_at'] = highlighted_at.isoformat()\nif source_url:\npayload['source_url'] = source_url\nif note:\npayload['note'] = note\nself.post('/highlights/', {'highlights': [payload]})\n</code></pre>"},{"location":"readwise-api/#readwise.api.Readwise.delete","title":"<code>delete(endpoint)</code>","text":"<p>Make a DELETE request to the Readwise API.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; client.delete('/highlights/1234')\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>endpoint</code> <code>str</code> <p>API endpoint</p> required <p>Returns:</p> Type Description <code>requests.Response</code> <p>requests.Response</p> Source code in <code>readwise/api.py</code> <pre><code>def delete(self, endpoint: str) -&gt; requests.Response:\n'''\n    Make a DELETE request to the Readwise API.\n    Examples:\n        &gt;&gt;&gt; client.delete('/highlights/1234')\n    Args:\n        endpoint: API endpoint\n    Returns:\n        requests.Response\n    '''\nlogging.debug(f'Deleting \"{endpoint}\"')\nreturn self._request('DELETE', endpoint)\n</code></pre>"},{"location":"readwise-api/#readwise.api.Readwise.delete_tag","title":"<code>delete_tag(book_id, tag_id)</code>","text":"<p>Delete a tag from a Readwise book.</p> <p>Parameters:</p> Name Type Description Default <code>book_id</code> <code>str</code> <p>Readwise book ID</p> required <p>Returns:</p> Type Description <p>requests.Response</p> Source code in <code>readwise/api.py</code> <pre><code>def delete_tag(self, book_id: str, tag_id: str):\n'''\n    Delete a tag from a Readwise book.\n    Args:\n        book_id: Readwise book ID\n    Returns:\n        requests.Response\n    '''\nlogging.debug(f'Deleting tag \"{tag_id}\"')\nself.delete(f'/books/{book_id}/tags/{tag_id}')\n</code></pre>"},{"location":"readwise-api/#readwise.api.Readwise.get","title":"<code>get(endpoint, params={})</code>","text":"<p>Make a GET request to the Readwise API.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; client.get('/highlights/')\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>endpoint</code> <code>str</code> <p>API endpoint</p> required <code>params</code> <code>dict</code> <p>Query parameters</p> <code>{}</code> <p>Returns:</p> Type Description <code>requests.Response</code> <p>requests.Response</p> Source code in <code>readwise/api.py</code> <pre><code>def get(self, endpoint: str, params: dict = {}) -&gt; requests.Response:\n'''\n    Make a GET request to the Readwise API.\n    Examples:\n        &gt;&gt;&gt; client.get('/highlights/')\n    Args:\n        endpoint: API endpoint\n        params: Query parameters\n    Returns:\n        requests.Response\n    '''\nlogging.debug(f'Getting \"{endpoint}\" with params: {params}')\nreturn self._request('GET', endpoint, params=params)\n</code></pre>"},{"location":"readwise-api/#readwise.api.Readwise.get_book_highlights","title":"<code>get_book_highlights(book_id)</code>","text":"<p>Get all highlights for a Readwise book.</p> <p>Parameters:</p> Name Type Description Default <code>book_id</code> <code>str</code> <p>Readwise book ID</p> required <p>Returns:</p> Type Description <code>Generator[ReadwiseHighlight, None, None]</code> <p>A generator of ReadwiseHighlight objects</p> Source code in <code>readwise/api.py</code> <pre><code>def get_book_highlights(\nself, book_id: str\n) -&gt; Generator[ReadwiseHighlight, None, None]:\n'''\n    Get all highlights for a Readwise book.\n    Args:\n        book_id: Readwise book ID\n    Returns:\n        A generator of ReadwiseHighlight objects\n    '''\nfor data in self.get_pagination_limit_20(\n'/highlights/', params={'book_id': book_id}\n):\nfor highlight in data['results']:\nyield ReadwiseHighlight(\nid=highlight['id'],\ntext=highlight['text'],\nnote=highlight['note'],\nlocation=highlight['location'],\nlocation_type=highlight['location_type'],\nurl=highlight['url'],\ncolor=highlight['color'],\nupdated=datetime.fromisoformat(highlight['updated'])\nif highlight['updated']\nelse None,\nbook_id=highlight['book_id'],\ntags=[\nReadwiseTag(id=tag['id'], name=tag['name'])\nfor tag in highlight['tags']\n],\n)\n</code></pre>"},{"location":"readwise-api/#readwise.api.Readwise.get_book_tags","title":"<code>get_book_tags(book_id)</code>","text":"<p>Get all tags for a Readwise book.</p> <p>Parameters:</p> Name Type Description Default <code>book_id</code> <code>str</code> <p>Readwise book ID</p> required <p>Returns:</p> Type Description <code>Generator[ReadwiseTag, None, None]</code> <p>A generator of ReadwiseTag objects</p> Source code in <code>readwise/api.py</code> <pre><code>def get_book_tags(self, book_id: str) -&gt; Generator[ReadwiseTag, None, None]:\n'''\n    Get all tags for a Readwise book.\n    Args:\n        book_id: Readwise book ID\n    Returns:\n        A generator of ReadwiseTag objects\n    '''\nfor data in self.get_pagination_limit_20(\nf'/books/{book_id}/tags/', params={'book_id': book_id}\n):\nfor tag in data:\nyield ReadwiseTag(id=tag['id'], name=tag['name'])\n</code></pre>"},{"location":"readwise-api/#readwise.api.Readwise.get_books","title":"<code>get_books(category)</code>","text":"<p>Get all Readwise books.</p> <p>Parameters:</p> Name Type Description Default <code>category</code> <code>Literal['articles', 'books', 'tweets', 'podcasts']</code> <p>Book category</p> required <p>Returns:</p> Type Description <code>Generator[ReadwiseBook, None, None]</code> <p>A generator of ReadwiseBook objects</p> Source code in <code>readwise/api.py</code> <pre><code>def get_books(\nself, category: Literal['articles', 'books', 'tweets', 'podcasts']\n) -&gt; Generator[ReadwiseBook, None, None]:\n'''\n    Get all Readwise books.\n    Args:\n        category: Book category\n    Returns:\n        A generator of ReadwiseBook objects\n    '''\nfor data in self.get_pagination_limit_20(\n'/books/', params={'category': category}\n):\nfor book in data['results']:\nyield ReadwiseBook(\nid=book['id'],\ntitle=book['title'],\nauthor=book['author'],\ncategory=book['category'],\nsource=book['source'],\nnum_highlights=book['num_highlights'],\nlast_highlight_at=datetime.fromisoformat(book['last_highlight_at'])\nif book['last_highlight_at']\nelse None,\nupdated=datetime.fromisoformat(book['updated'])\nif book['updated']\nelse None,\ncover_image_url=book['cover_image_url'],\nhighlights_url=book['highlights_url'],\nsource_url=book['source_url'],\nasin=book['asin'],\ntags=[\nReadwiseTag(id=tag['id'], name=tag['name'])\nfor tag in book['tags']\n],\ndocument_note=book['document_note'],\n)\n</code></pre>"},{"location":"readwise-api/#readwise.api.Readwise.get_pagination","title":"<code>get_pagination(endpoint, params={})</code>","text":"<p>Get a response from the Readwise API with pagination.</p> <p>Parameters:</p> Name Type Description Default <code>endpoint</code> <code>str</code> <p>API endpoint</p> required <code>params</code> <code>dict</code> <p>Query parameters</p> <code>{}</code> <p>Yields:</p> Type Description <code>dict</code> <p>Response data</p> Source code in <code>readwise/api.py</code> <pre><code>def get_pagination(\nself, endpoint: str, params: dict = {}\n) -&gt; Generator[dict, None, None]:\n'''\n    Get a response from the Readwise API with pagination.\n    Args:\n        endpoint: API endpoint\n        params: Query parameters\n    Yields:\n        Response data\n    '''\nyield from self._get_pagination('get', endpoint, params)\n</code></pre>"},{"location":"readwise-api/#readwise.api.Readwise.get_pagination_limit_20","title":"<code>get_pagination_limit_20(endpoint, params={}, page_size=1000)</code>","text":"<p>Get a response from the Readwise API with pagination and a rate limit of 20 requests per minute.</p> <p>Parameters:</p> Name Type Description Default <code>endpoint</code> <code>str</code> <p>API endpoint</p> required <code>params</code> <code>dict</code> <p>Query parameters</p> <code>{}</code> <code>page_size</code> <code>int</code> <p>Number of items per page</p> <code>1000</code> <p>Yields:</p> Type Description <code>dict</code> <p>Response data</p> Source code in <code>readwise/api.py</code> <pre><code>def get_pagination_limit_20(\nself, endpoint: str, params: dict = {}, page_size: int = 1000\n) -&gt; Generator[dict, None, None]:\n'''\n    Get a response from the Readwise API with pagination and a rate limit\n    of 20 requests per minute.\n    Args:\n        endpoint: API endpoint\n        params: Query parameters\n        page_size: Number of items per page\n    Yields:\n        Response data\n    '''\nyield from self._get_pagination(\n'get_with_limit_20', endpoint, params, page_size\n)\n</code></pre>"},{"location":"readwise-api/#readwise.api.Readwise.get_with_limit_20","title":"<code>get_with_limit_20(endpoint, params={})</code>","text":"<p>Get a response from the Readwise API with a rate limit of 20 requests per minute.</p> <p>The rate limit of 20 requests per minute needs to be used at the endpoints /highlights/ and /books/ because they return a lot of data.</p> <p>Parameters:</p> Name Type Description Default <code>endpoint</code> <code>str</code> <p>API endpoint</p> required <code>params</code> <code>dict</code> <p>Query parameters</p> <code>{}</code> <p>Returns:</p> Type Description <code>requests.Response</code> <p>requests.Response</p> Source code in <code>readwise/api.py</code> <pre><code>def get_with_limit_20(self, endpoint: str, params: dict = {}) -&gt; requests.Response:\n'''\n    Get a response from the Readwise API with a rate limit of 20 requests\n    per minute.\n    The rate limit of 20 requests per minute needs to be used at the\n    endpoints /highlights/ and /books/ because they return a lot of data.\n    Args:\n        endpoint: API endpoint\n        params: Query parameters\n    Returns:\n        requests.Response\n    '''\nreturn self.get(endpoint, params)\n</code></pre>"},{"location":"readwise-api/#readwise.api.Readwise.post","title":"<code>post(endpoint, data={})</code>","text":"<p>Make a POST request to the Readwise API.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; client.post('/highlights/', {'highlights': [{'text': 'foo'}]})\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>endpoint</code> <code>str</code> <p>API endpoint</p> required <code>data</code> <code>dict</code> <p>Request body</p> <code>{}</code> <p>Returns:</p> Type Description <code>requests.Response</code> <p>requests.Response</p> Source code in <code>readwise/api.py</code> <pre><code>def post(self, endpoint: str, data: dict = {}) -&gt; requests.Response:\n'''\n    Make a POST request to the Readwise API.\n    Examples:\n        &gt;&gt;&gt; client.post('/highlights/', {'highlights': [{'text': 'foo'}]})\n    Args:\n        endpoint: API endpoint\n        data: Request body\n    Returns:\n        requests.Response\n    '''\nurl = self._url + endpoint\nlogging.debug(f'Posting \"{url}\" with data: {data}')\nresponse = self._request('POST', endpoint, data=data)\nresponse.raise_for_status()\nreturn response\n</code></pre>"},{"location":"readwise-reader-api/","title":"Readwise Reader API","text":"Source code in <code>readwise/api.py</code> <pre><code>class ReadwiseReader:\ndef __init__(\nself,\ntoken: str,\n):\n'''\n        Readwise Reader API client.\n        Documentation for the Readwise Reader API can be found here:\n        https://readwise.io/reader_api\n        Args:\n            token: Readwise Reader Connector token\n        '''\nself._token = token\nself._url = 'https://readwise.io/api/v3'\n@property\ndef _session(self) -&gt; requests.Session:\n'''\n        Session object for making requests.\n        The headers are set to include the token.\n        '''\nsession = requests.Session()\nsession.headers.update(\n{\n'Accept': 'application/json',\n'Authorization': f'Token {self._token}',\n}\n)\nreturn session\ndef _request(\nself, method: str, endpoint: str, params: dict = {}, data: dict = {}\n) -&gt; requests.Response:\n'''\n        Make a request to the Readwise Reader API.\n        The request is rate limited to 20 calls per minute.\n        Args:\n            method: HTTP method\n            endpoint: API endpoints\n            params: Query parameters\n            data: Request body\n        Returns:\n            requests.Response\n        '''\nurl = self._url + endpoint\nlogging.debug(f'Calling \"{method}\" on \"{url}\" with params: {params}')\nresponse = self._session.request(method, url, params=params, json=data)\nwhile response.status_code == 429:\nseconds = int(response.headers['Retry-After'])\nlogging.warning(f'Rate limited by Readwise, retrying in {seconds} seconds')\nsleep(seconds)\nresponse = self._session.request(method, url, params=params, data=data)\nresponse.raise_for_status()\nreturn response\ndef get(self, endpoint: str, params: dict = {}) -&gt; requests.Response:\n'''\n        Make a GET request to the Readwise Reader API client.\n        Args:\n            endpoint: API endpoints\n            params: Query parameters\n        Returns:\n            requests.Response\n        '''\nlogging.debug(f'Getting \"{endpoint}\" with params: {params}')\nreturn self._request('GET', endpoint, params=params)\ndef get_with_limit_20(self, endpoint: str, params: dict = {}) -&gt; requests.Response:\n'''\n        Get a response from the Readwise Reader API with a rate limit of 20 requests\n        per minute.\n        Args:\n            endpoint: API endpoint\n            params: Query parameters\n        Returns:\n            requests.Response\n        '''\nreturn self.get(endpoint, params)\ndef _get_pagination(\nself,\nget_method: Literal['get', 'get_with_limit_20'],\nendpoint: str,\nparams: dict = {},\n) -&gt; Generator[dict, None, None]:\n'''\n        Get a response from the Readwise Reader API with pagination.\n        Args:\n            get_method: Method to use for making requests\n            endpoint: API endpoint\n            params: Query parameters\n            page_size: Number of items per page\n        Yields:\n            dict: Response data\n        '''\npageCursor = None\nwhile True:\nif pageCursor:\nparams.update({'pageCursor': pageCursor})\nlogging.debug(f'Getting page with cursor \"{pageCursor}\"')\ntry:\nresponse = getattr(self, get_method)(endpoint, params=params)\nexcept ChunkedEncodingError:\nlogging.error(f'Error getting page with cursor \"{pageCursor}\"')\nsleep(5)\ncontinue\ndata = response.json()\nyield data\nif (\ntype(data) == list\nor not data.get('nextPageCursor')\nor data.get('nextPageCursor') == pageCursor\n):\nbreak\npageCursor = data.get('nextPageCursor')\ndef get_pagination_limit_20(\nself, endpoint: str, params: dict = {}\n) -&gt; Generator[dict, None, None]:\n'''\n        Get a response from the Readwise Reader API with pagination and a rate limit\n        of 20 requests per minute.\n        Args:\n            endpoint: API endpoint\n            params: Query parameters\n            page_size: Number of items per page\n        Yields:\n            Response data\n        '''\nyield from self._get_pagination('get_with_limit_20', endpoint, params)\ndef post(self, endpoint: str, data: dict = {}) -&gt; requests.Response:\n'''\n        Make a POST request to the Readwise Reader API.\n        Args:\n            endpoint: API endpoints\n            data: Request body\n        Returns:\n            requests.Response\n        '''\nurl = self._url + endpoint\nlogging.debug(f'Posting \"{url}\" with data: {data}')\nresponse = self._request('POST', endpoint, data=data)\nresponse.raise_for_status()\nreturn response\ndef create_document(\nself,\nurl: str,\nhtml: str | None = None,\nshould_clean_html: bool | None = None,\ntitle: str | None = None,\nauthor: str | None = None,\nsummary: str | None = None,\npublished_at: datetime | None = None,\nimage_url: str | None = None,\nlocation: Literal['new', 'later', 'archive', 'feed'] = 'new',\nsaved_using: str | None = None,\ntags: list[str] = [],\n) -&gt; requests.Response:\n'''\n        Create a document in Readwise Reader.\n        Args:\n            url: Document URL\n            html: Document HTML\n            should_clean_html: Whether to clean the HTML\n            title: Document title\n            author: Document author\n            summary: Document summary\n            published_at: Date and time the document was published\n            image_url: An image URL to use as cover image\n            location: Document location\n            saved_using: How the document was saved\n            tags: List of tags\n        Returns:\n            requests.Response\n        '''\ndata: dict[str, Any] = {\n'url': url,\n'tags': tags,\n'location': location,\n}\nif html:\ndata['html'] = html\nif should_clean_html is not None:\ndata['should_clean_html'] = should_clean_html\nif title:\ndata['title'] = title\nif author:\ndata['author'] = author\nif summary:\ndata['summary'] = summary\nif published_at:\ndata['published_at'] = published_at.isoformat()\nif image_url:\ndata['image_url'] = image_url\nif saved_using:\ndata['saved_using'] = saved_using\nreturn self.post('/save/', data)\ndef get_documents(\nself, params: dict = {}\n) -&gt; Generator[ReadwiseReaderDocument, None, None]:\nfor data in self.get_pagination_limit_20('/list/', params=params):\nfor document in data['results']:\nyield ReadwiseReaderDocument(\nid=document['id'],\nurl=document['url'],\nsource_url=document['source_url'],\ntitle=document['title'],\nauthor=document['author'],\nsource=document['source'],\ncategory=document['category'],\nlocation=document['location'],\ntags=document['tags'],\nsite_name=document['site_name'],\nword_count=document['word_count'],\ncreated_at=datetime.fromisoformat(document['created_at']),\nupdated_at=datetime.fromisoformat(document['updated_at']),\nnotes=document['notes'],\npublished_date=document['published_date'],\nsummary=document['summary'],\nimage_url=document['image_url'],\nparent_id=document['parent_id'],\nreading_progress=document['reading_progress'],\n)\n</code></pre>"},{"location":"readwise-reader-api/#readwise.api.ReadwiseReader.__init__","title":"<code>__init__(token)</code>","text":"<p>Readwise Reader API client.</p> <p>Documentation for the Readwise Reader API can be found here: https://readwise.io/reader_api</p> <p>Parameters:</p> Name Type Description Default <code>token</code> <code>str</code> <p>Readwise Reader Connector token</p> required Source code in <code>readwise/api.py</code> <pre><code>def __init__(\nself,\ntoken: str,\n):\n'''\n    Readwise Reader API client.\n    Documentation for the Readwise Reader API can be found here:\n    https://readwise.io/reader_api\n    Args:\n        token: Readwise Reader Connector token\n    '''\nself._token = token\nself._url = 'https://readwise.io/api/v3'\n</code></pre>"},{"location":"readwise-reader-api/#readwise.api.ReadwiseReader.create_document","title":"<code>create_document(url, html=None, should_clean_html=None, title=None, author=None, summary=None, published_at=None, image_url=None, location='new', saved_using=None, tags=[])</code>","text":"<p>Create a document in Readwise Reader.</p> <p>Parameters:</p> Name Type Description Default <code>url</code> <code>str</code> <p>Document URL</p> required <code>html</code> <code>str | None</code> <p>Document HTML</p> <code>None</code> <code>should_clean_html</code> <code>bool | None</code> <p>Whether to clean the HTML</p> <code>None</code> <code>title</code> <code>str | None</code> <p>Document title</p> <code>None</code> <code>author</code> <code>str | None</code> <p>Document author</p> <code>None</code> <code>summary</code> <code>str | None</code> <p>Document summary</p> <code>None</code> <code>published_at</code> <code>datetime | None</code> <p>Date and time the document was published</p> <code>None</code> <code>image_url</code> <code>str | None</code> <p>An image URL to use as cover image</p> <code>None</code> <code>location</code> <code>Literal['new', 'later', 'archive', 'feed']</code> <p>Document location</p> <code>'new'</code> <code>saved_using</code> <code>str | None</code> <p>How the document was saved</p> <code>None</code> <code>tags</code> <code>list[str]</code> <p>List of tags</p> <code>[]</code> <p>Returns:</p> Type Description <code>requests.Response</code> <p>requests.Response</p> Source code in <code>readwise/api.py</code> <pre><code>def create_document(\nself,\nurl: str,\nhtml: str | None = None,\nshould_clean_html: bool | None = None,\ntitle: str | None = None,\nauthor: str | None = None,\nsummary: str | None = None,\npublished_at: datetime | None = None,\nimage_url: str | None = None,\nlocation: Literal['new', 'later', 'archive', 'feed'] = 'new',\nsaved_using: str | None = None,\ntags: list[str] = [],\n) -&gt; requests.Response:\n'''\n    Create a document in Readwise Reader.\n    Args:\n        url: Document URL\n        html: Document HTML\n        should_clean_html: Whether to clean the HTML\n        title: Document title\n        author: Document author\n        summary: Document summary\n        published_at: Date and time the document was published\n        image_url: An image URL to use as cover image\n        location: Document location\n        saved_using: How the document was saved\n        tags: List of tags\n    Returns:\n        requests.Response\n    '''\ndata: dict[str, Any] = {\n'url': url,\n'tags': tags,\n'location': location,\n}\nif html:\ndata['html'] = html\nif should_clean_html is not None:\ndata['should_clean_html'] = should_clean_html\nif title:\ndata['title'] = title\nif author:\ndata['author'] = author\nif summary:\ndata['summary'] = summary\nif published_at:\ndata['published_at'] = published_at.isoformat()\nif image_url:\ndata['image_url'] = image_url\nif saved_using:\ndata['saved_using'] = saved_using\nreturn self.post('/save/', data)\n</code></pre>"},{"location":"readwise-reader-api/#readwise.api.ReadwiseReader.get","title":"<code>get(endpoint, params={})</code>","text":"<p>Make a GET request to the Readwise Reader API client.</p> <p>Parameters:</p> Name Type Description Default <code>endpoint</code> <code>str</code> <p>API endpoints</p> required <code>params</code> <code>dict</code> <p>Query parameters</p> <code>{}</code> <p>Returns:</p> Type Description <code>requests.Response</code> <p>requests.Response</p> Source code in <code>readwise/api.py</code> <pre><code>def get(self, endpoint: str, params: dict = {}) -&gt; requests.Response:\n'''\n    Make a GET request to the Readwise Reader API client.\n    Args:\n        endpoint: API endpoints\n        params: Query parameters\n    Returns:\n        requests.Response\n    '''\nlogging.debug(f'Getting \"{endpoint}\" with params: {params}')\nreturn self._request('GET', endpoint, params=params)\n</code></pre>"},{"location":"readwise-reader-api/#readwise.api.ReadwiseReader.get_documents","title":"<code>get_documents(params={})</code>","text":"Source code in <code>readwise/api.py</code> <pre><code>def get_documents(\nself, params: dict = {}\n) -&gt; Generator[ReadwiseReaderDocument, None, None]:\nfor data in self.get_pagination_limit_20('/list/', params=params):\nfor document in data['results']:\nyield ReadwiseReaderDocument(\nid=document['id'],\nurl=document['url'],\nsource_url=document['source_url'],\ntitle=document['title'],\nauthor=document['author'],\nsource=document['source'],\ncategory=document['category'],\nlocation=document['location'],\ntags=document['tags'],\nsite_name=document['site_name'],\nword_count=document['word_count'],\ncreated_at=datetime.fromisoformat(document['created_at']),\nupdated_at=datetime.fromisoformat(document['updated_at']),\nnotes=document['notes'],\npublished_date=document['published_date'],\nsummary=document['summary'],\nimage_url=document['image_url'],\nparent_id=document['parent_id'],\nreading_progress=document['reading_progress'],\n)\n</code></pre>"},{"location":"readwise-reader-api/#readwise.api.ReadwiseReader.get_pagination_limit_20","title":"<code>get_pagination_limit_20(endpoint, params={})</code>","text":"<p>Get a response from the Readwise Reader API with pagination and a rate limit of 20 requests per minute.</p> <p>Parameters:</p> Name Type Description Default <code>endpoint</code> <code>str</code> <p>API endpoint</p> required <code>params</code> <code>dict</code> <p>Query parameters</p> <code>{}</code> <code>page_size</code> <p>Number of items per page</p> required <p>Yields:</p> Type Description <code>dict</code> <p>Response data</p> Source code in <code>readwise/api.py</code> <pre><code>def get_pagination_limit_20(\nself, endpoint: str, params: dict = {}\n) -&gt; Generator[dict, None, None]:\n'''\n    Get a response from the Readwise Reader API with pagination and a rate limit\n    of 20 requests per minute.\n    Args:\n        endpoint: API endpoint\n        params: Query parameters\n        page_size: Number of items per page\n    Yields:\n        Response data\n    '''\nyield from self._get_pagination('get_with_limit_20', endpoint, params)\n</code></pre>"},{"location":"readwise-reader-api/#readwise.api.ReadwiseReader.get_with_limit_20","title":"<code>get_with_limit_20(endpoint, params={})</code>","text":"<p>Get a response from the Readwise Reader API with a rate limit of 20 requests per minute.</p> <p>Parameters:</p> Name Type Description Default <code>endpoint</code> <code>str</code> <p>API endpoint</p> required <code>params</code> <code>dict</code> <p>Query parameters</p> <code>{}</code> <p>Returns:</p> Type Description <code>requests.Response</code> <p>requests.Response</p> Source code in <code>readwise/api.py</code> <pre><code>def get_with_limit_20(self, endpoint: str, params: dict = {}) -&gt; requests.Response:\n'''\n    Get a response from the Readwise Reader API with a rate limit of 20 requests\n    per minute.\n    Args:\n        endpoint: API endpoint\n        params: Query parameters\n    Returns:\n        requests.Response\n    '''\nreturn self.get(endpoint, params)\n</code></pre>"},{"location":"readwise-reader-api/#readwise.api.ReadwiseReader.post","title":"<code>post(endpoint, data={})</code>","text":"<p>Make a POST request to the Readwise Reader API.</p> <p>Parameters:</p> Name Type Description Default <code>endpoint</code> <code>str</code> <p>API endpoints</p> required <code>data</code> <code>dict</code> <p>Request body</p> <code>{}</code> <p>Returns:</p> Type Description <code>requests.Response</code> <p>requests.Response</p> Source code in <code>readwise/api.py</code> <pre><code>def post(self, endpoint: str, data: dict = {}) -&gt; requests.Response:\n'''\n    Make a POST request to the Readwise Reader API.\n    Args:\n        endpoint: API endpoints\n        data: Request body\n    Returns:\n        requests.Response\n    '''\nurl = self._url + endpoint\nlogging.debug(f'Posting \"{url}\" with data: {data}')\nresponse = self._request('POST', endpoint, data=data)\nresponse.raise_for_status()\nreturn response\n</code></pre>"}]}