{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Python Module to use the Readwise API","text":"<p>This module is a wrapper for the Readwise API.</p> <p>It allows you to easily access your Readwise data in Python.</p>"},{"location":"#installation","title":"Installation","text":"<pre><code>pip install -U readwise\n</code></pre>"},{"location":"#quickstart","title":"Quickstart","text":""},{"location":"#readwise-api","title":"Readwise API","text":"<pre><code>from readwise import ReadwiseClient\n\nclient = ReadwiseClient('token')\n\nbooks = client.get_books(category='articles')\n\nfor book in books:\n    highlights = client.get_book_highlights(book.id)\n    if len(highlights) &gt; 0:\n        print(book.title)\n        for highlight in highlights:\n            print(highlight.text)\n</code></pre>"},{"location":"#readwise-readwise-api","title":"Readwise Readwise API","text":"<pre><code>from readwise import ReadwiseReaderClient\n\nclient = ReadwiseReaderClient('token')\n\nresponse = client.create_document('https://www.example.com')\nresponse.raise_for_status()\n</code></pre>"},{"location":"#documentation","title":"Documentation","text":""},{"location":"#readwise-api_1","title":"Readwise API","text":"<p>The Readwise API is documented here.</p> <p>The Readwise Reader API is documented here.</p>"},{"location":"models/","title":"Models","text":""},{"location":"models/#readwise.models.ReadwiseBook","title":"<code>ReadwiseBook</code>  <code>dataclass</code>","text":"<p>Represents a Readwise book.</p> <p>Attributes:</p>    Name Type Description     <code>id</code>  <code>str</code>  <p>The book's ID.</p>   <code>title</code>  <code>str</code>  <p>The book's title.</p>   <code>author</code>  <code>str</code>  <p>The book's author.</p>   <code>category</code>  <code>str</code>  <p>The book's category.</p>   <code>source</code>  <code>str</code>  <p>The book's source.</p>   <code>num_highlights</code>  <code>int</code>  <p>The number of highlights for the book.</p>   <code>last_highlight_at</code>  <code>datetime</code>  <p>The date and time of the last highlight for the book.</p>   <code>updated</code>  <code>datetime</code>  <p>The date and time the book was last updated.</p>   <code>cover_image_url</code>  <code>str</code>  <p>The URL of the book's cover image.</p>   <code>highlights_url</code>  <code>str</code>  <p>The URL of the book's highlights.</p>   <code>source_url</code>  <code>str</code>  <p>The URL of the book's source.</p>   <code>asin</code>  <code>str</code>  <p>The book's ASIN.</p>   <code>tags</code>  <code>list[ReadwiseTag]</code>  <p>The book's tags.</p>   <code>document_note</code>  <code>str</code>  <p>The book's document note.</p>     Source code in <code>readwise/models.py</code> <pre><code>@dataclass\nclass ReadwiseBook:\n    '''\n    Represents a Readwise book.\n\n    Attributes:\n        id: The book's ID.\n        title: The book's title.\n        author: The book's author.\n        category: The book's category.\n        source: The book's source.\n        num_highlights: The number of highlights for the book.\n        last_highlight_at: The date and time of the last highlight for the book.\n        updated: The date and time the book was last updated.\n        cover_image_url: The URL of the book's cover image.\n        highlights_url: The URL of the book's highlights.\n        source_url: The URL of the book's source.\n        asin: The book's ASIN.\n        tags: The book's tags.\n        document_note: The book's document note.\n    '''\n\n    id: str\n    title: str\n    author: str\n    category: str\n    source: str\n    num_highlights: int\n    last_highlight_at: datetime\n    updated: datetime\n    cover_image_url: str\n    highlights_url: str\n    source_url: str\n    asin: str\n    tags: list[ReadwiseTag]\n    document_note: str\n</code></pre>"},{"location":"models/#readwise.models.ReadwiseHighlight","title":"<code>ReadwiseHighlight</code>  <code>dataclass</code>","text":"<p>Represents a Readwise highlight.</p> <p>Attributes:</p>    Name Type Description     <code>id</code>  <code>str</code>  <p>The highlight's ID.</p>   <code>text</code>  <code>str</code>  <p>The highlight's text.</p>   <code>note</code>  <code>str</code>  <p>The highlight's note.</p>   <code>location</code>  <code>int</code>  <p>The highlight's location.</p>   <code>location_type</code>  <code>str</code>  <p>The highlight's location type.</p>   <code>url</code>  <code>str | None</code>  <p>The highlight's URL.</p>   <code>color</code>  <code>str</code>  <p>The highlight's color.</p>   <code>updated</code>  <code>datetime</code>  <p>The date and time the highlight was last updated.</p>   <code>book_id</code>  <code>str</code>  <p>The ID of the book the highlight is from.</p>   <code>tags</code>  <code>list[ReadwiseTag]</code>  <p>The highlight's tags.</p>     Source code in <code>readwise/models.py</code> <pre><code>@dataclass\nclass ReadwiseHighlight:\n    '''\n    Represents a Readwise highlight.\n\n    Attributes:\n        id: The highlight's ID.\n        text: The highlight's text.\n        note: The highlight's note.\n        location: The highlight's location.\n        location_type: The highlight's location type.\n        url: The highlight's URL.\n        color: The highlight's color.\n        updated: The date and time the highlight was last updated.\n        book_id: The ID of the book the highlight is from.\n        tags: The highlight's tags.\n    '''\n\n    id: str\n    text: str\n    note: str\n    location: int\n    location_type: str\n    url: str | None\n    color: str\n    updated: datetime\n    book_id: str\n    tags: list[ReadwiseTag]\n</code></pre>"},{"location":"models/#readwise.models.ReadwiseTag","title":"<code>ReadwiseTag</code>  <code>dataclass</code>","text":"<p>Represents a Readwise tag.</p> <p>Attributes:</p>    Name Type Description     <code>id</code>  <code>str</code>  <p>The tag's ID.</p>   <code>name</code>  <code>str</code>  <p>The tag's name.</p>     Source code in <code>readwise/models.py</code> <pre><code>@dataclass\nclass ReadwiseTag:\n    '''Represents a Readwise tag.\n\n    Attributes:\n        id: The tag's ID.\n        name: The tag's name.\n    '''\n\n    id: str\n    name: str\n</code></pre>"},{"location":"readwise-api/","title":"Readwise API","text":"Source code in <code>readwise/api.py</code> <pre><code>class ReadwiseClient:\n    def __init__(\n        self,\n        token: str,\n    ):\n        '''\n        Initialize a ReadwiseClient.\n\n        Documentation for the Readwise API can be found here:\n        https://readwise.io/api_deets\n\n        Args:\n            token: Readwise API token\n        '''\n        self.token = token\n        self.url = 'https://readwise.io/api/v2'\n\n    @property\n    def _session(self) -&gt; requests.Session:\n        '''\n        Return a requests.Session object with the Readwise API token set as an\n        Authorization header.\n        '''\n        session = requests.Session()\n        session.headers.update(\n            {\n                'Accept': 'application/json',\n                'Authorization': f'Token {self.token}',\n            }\n        )\n        return session\n\n    @on_exception(expo, RateLimitException, max_tries=8)\n    @sleep_and_retry\n    @limits(calls=240, period=60)\n    def _request(\n        self, method: str, endpoint: str, params: dict = {}, data: dict = {}\n    ) -&gt; requests.Response:\n        '''\n        Make a request to the Readwise API.\n\n        The Readwise API has a rate limit of 240 requests per minute. This\n        method will raise a ReadwiseRateLimitException if the rate limit is\n        exceeded.\n\n        The Exception will be raised after 8 retries with exponential backoff.\n\n        Args:\n            method: HTTP method\n            endpoint: API endpoint\n            params: Query parameters\n            data: Request body\n\n        Returns:\n            requests.Response\n        '''\n        url = self.url + endpoint\n        logging.debug(f'Calling \"{method}\" on \"{url}\" with params: {params}')\n        response = self._session.request(method, url, params=params, json=data)\n        while response.status_code == 429:\n            seconds = int(response.headers['Retry-After'])\n            logging.warning(f'Rate limited by Readwise, retrying in {seconds} seconds')\n            sleep(seconds)\n            response = self._session.request(method, url, params=params, data=data)\n        response.raise_for_status()\n        return response\n\n    def get(self, endpoint: str, params: dict = {}) -&gt; requests.Response:\n        '''\n        Make a GET request to the Readwise API.\n\n        Examples:\n            &gt;&gt;&gt; client.get('/highlights/')\n\n        Args:\n            endpoint: API endpoint\n            params: Query parameters\n\n        Returns:\n            requests.Response\n        '''\n        logging.debug(f'Getting \"{endpoint}\" with params: {params}')\n        return self._request('GET', endpoint, params=params)\n\n    @on_exception(expo, RateLimitException, max_tries=8)\n    @sleep_and_retry\n    @limits(calls=20, period=60)\n    def get_with_limit_20(self, endpoint: str, params: dict = {}) -&gt; requests.Response:\n        '''\n        Get a response from the Readwise API with a rate limit of 20 requests\n        per minute.\n\n        The rate limit of 20 requests per minute needs to be used at the\n        endpoints /highlights/ and /books/ because they return a lot of data.\n\n        Args:\n            endpoint: API endpoint\n            params: Query parameters\n        Returns:\n            requests.Response\n        '''\n        return self.get(endpoint, params)\n\n    def post(self, endpoint: str, data: dict = {}) -&gt; requests.Response:\n        '''\n        Make a POST request to the Readwise API.\n\n        Examples:\n            &gt;&gt;&gt; client.post('/highlights/', {'highlights': [{'text': 'foo'}]})\n\n        Args:\n            endpoint: API endpoint\n            data: Request body\n\n        Returns:\n            requests.Response\n        '''\n        url = self.url + endpoint\n        logging.debug(f'Posting \"{url}\" with data: {data}')\n        response = self._request('POST', endpoint, data=data)\n        response.raise_for_status()\n        return response\n\n    def delete(self, endpoint: str) -&gt; requests.Response:\n        '''\n        Make a DELETE request to the Readwise API.\n\n        Examples:\n            &gt;&gt;&gt; client.delete('/highlights/1234')\n\n        Args:\n            endpoint: API endpoint\n\n        Returns:\n            requests.Response\n        '''\n        logging.debug(f'Deleting \"{endpoint}\"')\n        return self._request('DELETE', endpoint)\n\n    def get_books(\n        self, category: Literal['articles', 'books', 'tweets', 'podcasts']\n    ) -&gt; Generator[ReadwiseBook, None, None]:\n        '''\n        Get all Readwise books.\n\n        Args:\n            category: Book category\n\n        Returns:\n            A generator of ReadwiseBook objects\n        '''\n        page = 1\n        page_size = 1000\n        while True:\n            data = self.get_with_limit_20(\n                '/books',\n                {'page': page, 'page_size': page_size, 'category': category},\n            ).json()\n\n            for book in data['results']:\n                yield ReadwiseBook(\n                    id=book['id'],\n                    title=book['title'],\n                    author=book['author'],\n                    category=book['category'],\n                    source=book['source'],\n                    num_highlights=book['num_highlights'],\n                    last_highlight_at=datetime.fromisoformat(book['last_highlight_at']),\n                    updated=datetime.fromisoformat(book['updated']),\n                    cover_image_url=book['cover_image_url'],\n                    highlights_url=book['highlights_url'],\n                    source_url=book['source_url'],\n                    asin=book['asin'],\n                    tags=[\n                        ReadwiseTag(id=tag['id'], name=tag['name'])\n                        for tag in book['tags']\n                    ],\n                    document_note=book['document_note'],\n                )\n\n            if not data['next']:\n                break\n            page += 1\n\n    def get_book_highlights(\n        self, book_id: str\n    ) -&gt; Generator[ReadwiseHighlight, None, None]:\n        '''\n        Get all highlights for a Readwise book.\n\n        Args:\n            book_id: Readwise book ID\n\n        Returns:\n            A generator of ReadwiseHighlight objects\n        '''\n        page = 1\n        page_size = 1000\n        while True:\n            data = self.get_with_limit_20(\n                '/highlights',\n                {'page': page, 'page_size': page_size, 'book_id': book_id},\n            ).json()\n            for highlight in data['results']:\n                yield ReadwiseHighlight(\n                    id=highlight['id'],\n                    text=highlight['text'],\n                    note=highlight['note'],\n                    location=highlight['location'],\n                    location_type=highlight['location_type'],\n                    url=highlight['url'],\n                    color=highlight['color'],\n                    updated=datetime.fromisoformat(highlight['updated']),\n                    book_id=highlight['book_id'],\n                    tags=[\n                        ReadwiseTag(id=tag['id'], name=tag['name'])\n                        for tag in highlight['tags']\n                    ],\n                )\n\n            if not data['next']:\n                break\n            page += 1\n\n    def create_highlight(\n        self,\n        text: str,\n        title: str,\n        author: str | None = None,\n        highlighted_at: datetime | None = None,\n        source_url: str | None = None,\n        category: str = 'articles',\n        note: str | None = None,\n    ):\n        '''\n        Create a Readwise highlight.\n\n        Args:\n            text: Highlight text\n            title: Book title\n            author: Book author\n            highlighted_at: Date and time the highlight was created\n            source_url: URL of the book\n            category: Book category\n            note: Highlight note\n        '''\n        payload = {'text': text, 'title': title, 'category': category}\n        if author:\n            payload['author'] = author\n        if highlighted_at:\n            payload['highlighted_at'] = highlighted_at.isoformat()\n        if source_url:\n            payload['source_url'] = source_url\n        if note:\n            payload['note'] = note\n\n        self.post('/highlights/', {'highlights': [payload]})\n\n    def get_book_tags(self, book_id: str) -&gt; Generator[ReadwiseTag, None, None]:\n        '''\n        Get all tags for a Readwise book.\n\n        Args:\n            book_id: Readwise book ID\n\n        Returns:\n            A generator of ReadwiseTag objects\n        '''\n        page = 1\n        page_size = 1000\n        data = self.get(\n            f'/books/{book_id}/tags',\n            {'page': page, 'page_size': page_size, 'book_id': book_id},\n        ).json()\n\n        for tag in data:\n            yield ReadwiseTag(tag['id'], tag['name'])\n\n    def add_tag(self, book_id: str, tag: str):\n        '''\n        Add a tag to a Readwise book.\n\n        Args:\n            book_id: Readwise book ID\n            tag: Tag name\n\n        Returns:\n            requests.Response\n        '''\n        logging.debug(f'Adding tag \"{tag}\" to book \"{book_id}\"')\n        payload = {'name': tag}\n        self.post(f'/books/{book_id}/tags/', payload)\n\n    def delete_tag(self, book_id: str, tag_id: str):\n        '''\n        Delete a tag from a Readwise book.\n\n        Args:\n            book_id: Readwise book ID\n\n        Returns:\n            requests.Response\n        '''\n        logging.debug(f'Deleting tag \"{tag_id}\"')\n        self.delete(f'/books/{book_id}/tags/{tag_id}')\n</code></pre>"},{"location":"readwise-api/#readwise.api.ReadwiseClient.token","title":"<code>token = token</code>  <code>instance-attribute</code>","text":""},{"location":"readwise-api/#readwise.api.ReadwiseClient.url","title":"<code>url = 'https://readwise.io/api/v2'</code>  <code>instance-attribute</code>","text":""},{"location":"readwise-api/#readwise.api.ReadwiseClient.__init__","title":"<code>__init__(token)</code>","text":"<p>Initialize a ReadwiseClient.</p> <p>Documentation for the Readwise API can be found here: https://readwise.io/api_deets</p> <p>Parameters:</p>    Name Type Description Default     <code>token</code>  <code>str</code>  <p>Readwise API token</p>  required      Source code in <code>readwise/api.py</code> <pre><code>def __init__(\n    self,\n    token: str,\n):\n    '''\n    Initialize a ReadwiseClient.\n\n    Documentation for the Readwise API can be found here:\n    https://readwise.io/api_deets\n\n    Args:\n        token: Readwise API token\n    '''\n    self.token = token\n    self.url = 'https://readwise.io/api/v2'\n</code></pre>"},{"location":"readwise-api/#readwise.api.ReadwiseClient.add_tag","title":"<code>add_tag(book_id, tag)</code>","text":"<p>Add a tag to a Readwise book.</p> <p>Parameters:</p>    Name Type Description Default     <code>book_id</code>  <code>str</code>  <p>Readwise book ID</p>  required    <code>tag</code>  <code>str</code>  <p>Tag name</p>  required     <p>Returns:</p>    Type Description       <p>requests.Response</p>     Source code in <code>readwise/api.py</code> <pre><code>def add_tag(self, book_id: str, tag: str):\n    '''\n    Add a tag to a Readwise book.\n\n    Args:\n        book_id: Readwise book ID\n        tag: Tag name\n\n    Returns:\n        requests.Response\n    '''\n    logging.debug(f'Adding tag \"{tag}\" to book \"{book_id}\"')\n    payload = {'name': tag}\n    self.post(f'/books/{book_id}/tags/', payload)\n</code></pre>"},{"location":"readwise-api/#readwise.api.ReadwiseClient.create_highlight","title":"<code>create_highlight(text, title, author=None, highlighted_at=None, source_url=None, category='articles', note=None)</code>","text":"<p>Create a Readwise highlight.</p> <p>Parameters:</p>    Name Type Description Default     <code>text</code>  <code>str</code>  <p>Highlight text</p>  required    <code>title</code>  <code>str</code>  <p>Book title</p>  required    <code>author</code>  <code>str | None</code>  <p>Book author</p>  <code>None</code>    <code>highlighted_at</code>  <code>datetime | None</code>  <p>Date and time the highlight was created</p>  <code>None</code>    <code>source_url</code>  <code>str | None</code>  <p>URL of the book</p>  <code>None</code>    <code>category</code>  <code>str</code>  <p>Book category</p>  <code>'articles'</code>    <code>note</code>  <code>str | None</code>  <p>Highlight note</p>  <code>None</code>      Source code in <code>readwise/api.py</code> <pre><code>def create_highlight(\n    self,\n    text: str,\n    title: str,\n    author: str | None = None,\n    highlighted_at: datetime | None = None,\n    source_url: str | None = None,\n    category: str = 'articles',\n    note: str | None = None,\n):\n    '''\n    Create a Readwise highlight.\n\n    Args:\n        text: Highlight text\n        title: Book title\n        author: Book author\n        highlighted_at: Date and time the highlight was created\n        source_url: URL of the book\n        category: Book category\n        note: Highlight note\n    '''\n    payload = {'text': text, 'title': title, 'category': category}\n    if author:\n        payload['author'] = author\n    if highlighted_at:\n        payload['highlighted_at'] = highlighted_at.isoformat()\n    if source_url:\n        payload['source_url'] = source_url\n    if note:\n        payload['note'] = note\n\n    self.post('/highlights/', {'highlights': [payload]})\n</code></pre>"},{"location":"readwise-api/#readwise.api.ReadwiseClient.delete","title":"<code>delete(endpoint)</code>","text":"<p>Make a DELETE request to the Readwise API.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; client.delete('/highlights/1234')\n</code></pre> <p>Parameters:</p>    Name Type Description Default     <code>endpoint</code>  <code>str</code>  <p>API endpoint</p>  required     <p>Returns:</p>    Type Description      <code>requests.Response</code>  <p>requests.Response</p>     Source code in <code>readwise/api.py</code> <pre><code>def delete(self, endpoint: str) -&gt; requests.Response:\n    '''\n    Make a DELETE request to the Readwise API.\n\n    Examples:\n        &gt;&gt;&gt; client.delete('/highlights/1234')\n\n    Args:\n        endpoint: API endpoint\n\n    Returns:\n        requests.Response\n    '''\n    logging.debug(f'Deleting \"{endpoint}\"')\n    return self._request('DELETE', endpoint)\n</code></pre>"},{"location":"readwise-api/#readwise.api.ReadwiseClient.delete_tag","title":"<code>delete_tag(book_id, tag_id)</code>","text":"<p>Delete a tag from a Readwise book.</p> <p>Parameters:</p>    Name Type Description Default     <code>book_id</code>  <code>str</code>  <p>Readwise book ID</p>  required     <p>Returns:</p>    Type Description       <p>requests.Response</p>     Source code in <code>readwise/api.py</code> <pre><code>def delete_tag(self, book_id: str, tag_id: str):\n    '''\n    Delete a tag from a Readwise book.\n\n    Args:\n        book_id: Readwise book ID\n\n    Returns:\n        requests.Response\n    '''\n    logging.debug(f'Deleting tag \"{tag_id}\"')\n    self.delete(f'/books/{book_id}/tags/{tag_id}')\n</code></pre>"},{"location":"readwise-api/#readwise.api.ReadwiseClient.get","title":"<code>get(endpoint, params={})</code>","text":"<p>Make a GET request to the Readwise API.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; client.get('/highlights/')\n</code></pre> <p>Parameters:</p>    Name Type Description Default     <code>endpoint</code>  <code>str</code>  <p>API endpoint</p>  required    <code>params</code>  <code>dict</code>  <p>Query parameters</p>  <code>{}</code>     <p>Returns:</p>    Type Description      <code>requests.Response</code>  <p>requests.Response</p>     Source code in <code>readwise/api.py</code> <pre><code>def get(self, endpoint: str, params: dict = {}) -&gt; requests.Response:\n    '''\n    Make a GET request to the Readwise API.\n\n    Examples:\n        &gt;&gt;&gt; client.get('/highlights/')\n\n    Args:\n        endpoint: API endpoint\n        params: Query parameters\n\n    Returns:\n        requests.Response\n    '''\n    logging.debug(f'Getting \"{endpoint}\" with params: {params}')\n    return self._request('GET', endpoint, params=params)\n</code></pre>"},{"location":"readwise-api/#readwise.api.ReadwiseClient.get_book_highlights","title":"<code>get_book_highlights(book_id)</code>","text":"<p>Get all highlights for a Readwise book.</p> <p>Parameters:</p>    Name Type Description Default     <code>book_id</code>  <code>str</code>  <p>Readwise book ID</p>  required     <p>Returns:</p>    Type Description      <code>Generator[ReadwiseHighlight, None, None]</code>  <p>A generator of ReadwiseHighlight objects</p>     Source code in <code>readwise/api.py</code> <pre><code>def get_book_highlights(\n    self, book_id: str\n) -&gt; Generator[ReadwiseHighlight, None, None]:\n    '''\n    Get all highlights for a Readwise book.\n\n    Args:\n        book_id: Readwise book ID\n\n    Returns:\n        A generator of ReadwiseHighlight objects\n    '''\n    page = 1\n    page_size = 1000\n    while True:\n        data = self.get_with_limit_20(\n            '/highlights',\n            {'page': page, 'page_size': page_size, 'book_id': book_id},\n        ).json()\n        for highlight in data['results']:\n            yield ReadwiseHighlight(\n                id=highlight['id'],\n                text=highlight['text'],\n                note=highlight['note'],\n                location=highlight['location'],\n                location_type=highlight['location_type'],\n                url=highlight['url'],\n                color=highlight['color'],\n                updated=datetime.fromisoformat(highlight['updated']),\n                book_id=highlight['book_id'],\n                tags=[\n                    ReadwiseTag(id=tag['id'], name=tag['name'])\n                    for tag in highlight['tags']\n                ],\n            )\n\n        if not data['next']:\n            break\n        page += 1\n</code></pre>"},{"location":"readwise-api/#readwise.api.ReadwiseClient.get_book_tags","title":"<code>get_book_tags(book_id)</code>","text":"<p>Get all tags for a Readwise book.</p> <p>Parameters:</p>    Name Type Description Default     <code>book_id</code>  <code>str</code>  <p>Readwise book ID</p>  required     <p>Returns:</p>    Type Description      <code>Generator[ReadwiseTag, None, None]</code>  <p>A generator of ReadwiseTag objects</p>     Source code in <code>readwise/api.py</code> <pre><code>def get_book_tags(self, book_id: str) -&gt; Generator[ReadwiseTag, None, None]:\n    '''\n    Get all tags for a Readwise book.\n\n    Args:\n        book_id: Readwise book ID\n\n    Returns:\n        A generator of ReadwiseTag objects\n    '''\n    page = 1\n    page_size = 1000\n    data = self.get(\n        f'/books/{book_id}/tags',\n        {'page': page, 'page_size': page_size, 'book_id': book_id},\n    ).json()\n\n    for tag in data:\n        yield ReadwiseTag(tag['id'], tag['name'])\n</code></pre>"},{"location":"readwise-api/#readwise.api.ReadwiseClient.get_books","title":"<code>get_books(category)</code>","text":"<p>Get all Readwise books.</p> <p>Parameters:</p>    Name Type Description Default     <code>category</code>  <code>Literal['articles', 'books', 'tweets', 'podcasts']</code>  <p>Book category</p>  required     <p>Returns:</p>    Type Description      <code>Generator[ReadwiseBook, None, None]</code>  <p>A generator of ReadwiseBook objects</p>     Source code in <code>readwise/api.py</code> <pre><code>def get_books(\n    self, category: Literal['articles', 'books', 'tweets', 'podcasts']\n) -&gt; Generator[ReadwiseBook, None, None]:\n    '''\n    Get all Readwise books.\n\n    Args:\n        category: Book category\n\n    Returns:\n        A generator of ReadwiseBook objects\n    '''\n    page = 1\n    page_size = 1000\n    while True:\n        data = self.get_with_limit_20(\n            '/books',\n            {'page': page, 'page_size': page_size, 'category': category},\n        ).json()\n\n        for book in data['results']:\n            yield ReadwiseBook(\n                id=book['id'],\n                title=book['title'],\n                author=book['author'],\n                category=book['category'],\n                source=book['source'],\n                num_highlights=book['num_highlights'],\n                last_highlight_at=datetime.fromisoformat(book['last_highlight_at']),\n                updated=datetime.fromisoformat(book['updated']),\n                cover_image_url=book['cover_image_url'],\n                highlights_url=book['highlights_url'],\n                source_url=book['source_url'],\n                asin=book['asin'],\n                tags=[\n                    ReadwiseTag(id=tag['id'], name=tag['name'])\n                    for tag in book['tags']\n                ],\n                document_note=book['document_note'],\n            )\n\n        if not data['next']:\n            break\n        page += 1\n</code></pre>"},{"location":"readwise-api/#readwise.api.ReadwiseClient.get_with_limit_20","title":"<code>get_with_limit_20(endpoint, params={})</code>","text":"<p>Get a response from the Readwise API with a rate limit of 20 requests per minute.</p> <p>The rate limit of 20 requests per minute needs to be used at the endpoints /highlights/ and /books/ because they return a lot of data.</p> <p>Parameters:</p>    Name Type Description Default     <code>endpoint</code>  <code>str</code>  <p>API endpoint</p>  required    <code>params</code>  <code>dict</code>  <p>Query parameters</p>  <code>{}</code>     <p>Returns:</p>    Type Description      <code>requests.Response</code>  <p>requests.Response</p>     Source code in <code>readwise/api.py</code> <pre><code>@on_exception(expo, RateLimitException, max_tries=8)\n@sleep_and_retry\n@limits(calls=20, period=60)\ndef get_with_limit_20(self, endpoint: str, params: dict = {}) -&gt; requests.Response:\n    '''\n    Get a response from the Readwise API with a rate limit of 20 requests\n    per minute.\n\n    The rate limit of 20 requests per minute needs to be used at the\n    endpoints /highlights/ and /books/ because they return a lot of data.\n\n    Args:\n        endpoint: API endpoint\n        params: Query parameters\n    Returns:\n        requests.Response\n    '''\n    return self.get(endpoint, params)\n</code></pre>"},{"location":"readwise-api/#readwise.api.ReadwiseClient.post","title":"<code>post(endpoint, data={})</code>","text":"<p>Make a POST request to the Readwise API.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; client.post('/highlights/', {'highlights': [{'text': 'foo'}]})\n</code></pre> <p>Parameters:</p>    Name Type Description Default     <code>endpoint</code>  <code>str</code>  <p>API endpoint</p>  required    <code>data</code>  <code>dict</code>  <p>Request body</p>  <code>{}</code>     <p>Returns:</p>    Type Description      <code>requests.Response</code>  <p>requests.Response</p>     Source code in <code>readwise/api.py</code> <pre><code>def post(self, endpoint: str, data: dict = {}) -&gt; requests.Response:\n    '''\n    Make a POST request to the Readwise API.\n\n    Examples:\n        &gt;&gt;&gt; client.post('/highlights/', {'highlights': [{'text': 'foo'}]})\n\n    Args:\n        endpoint: API endpoint\n        data: Request body\n\n    Returns:\n        requests.Response\n    '''\n    url = self.url + endpoint\n    logging.debug(f'Posting \"{url}\" with data: {data}')\n    response = self._request('POST', endpoint, data=data)\n    response.raise_for_status()\n    return response\n</code></pre>"},{"location":"readwise-reader-api/","title":"Readwise Reader API","text":"Source code in <code>readwise/api.py</code> <pre><code>class ReadwiseReaderClient:\n    def __init__(\n        self,\n        token: str,\n    ):\n        '''\n        Readwise Reader Connector.\n\n        Documentation for the Readwise Reader API can be found here:\n        https://readwise.io/reader_api\n\n        Args:\n            token: Readwise Reader Connector token\n        '''\n        self.token = token\n        self.url = 'https://readwise.io/api/v3'\n\n    @property\n    def _session(self) -&gt; requests.Session:\n        '''\n        Session object for making requests.\n        The headers are set to include the token.\n        '''\n        session = requests.Session()\n        session.headers.update(\n            {\n                'Accept': 'application/json',\n                'Authorization': f'Token {self.token}',\n            }\n        )\n        return session\n\n    @on_exception(expo, RateLimitException, max_tries=8)\n    @sleep_and_retry\n    @limits(calls=20, period=60)\n    def _request(\n        self, method: str, endpoint: str, params: dict = {}, data: dict = {}\n    ) -&gt; requests.Response:\n        '''\n        Make a request to the Readwise Reader API.\n        The request is rate limited to 20 calls per minute.\n\n        Args:\n            method: HTTP method\n            endpoint: API endpoints\n            params: Query parameters\n            data: Request body\n\n        Returns:\n            requests.Response\n        '''\n        url = self.url + endpoint\n        logging.debug(f'Calling \"{method}\" on \"{url}\" with params: {params}')\n        response = self._session.request(method, url, params=params, json=data)\n        while response.status_code == 429:\n            seconds = int(response.headers['Retry-After'])\n            logging.warning(f'Rate limited by Readwise, retrying in {seconds} seconds')\n            sleep(seconds)\n            response = self._session.request(method, url, params=params, data=data)\n        response.raise_for_status()\n        return response\n\n    def get(self, endpoint: str, params: dict = {}) -&gt; requests.Response:\n        '''\n        Make a GET request to the Readwise Reader API.\n\n        Args:\n            endpoint: API endpoints\n            params: Query parameters\n\n        Returns:\n            requests.Response\n        '''\n        logging.debug(f'Getting \"{endpoint}\" with params: {params}')\n        return self._request('GET', endpoint, params=params)\n\n    def post(self, endpoint: str, data: dict = {}) -&gt; requests.Response:\n        '''\n        Make a POST request to the Readwise Reader API.\n\n        Args:\n            endpoint: API endpoints\n            data: Request body\n\n        Returns:\n            requests.Response\n        '''\n        url = self.url + endpoint\n        logging.debug(f'Posting \"{url}\" with data: {data}')\n        response = self._request('POST', endpoint, data=data)\n        response.raise_for_status()\n        return response\n\n    def create_document(\n        self,\n        url: str,\n        html: str | None = None,\n        should_clean_html: bool | None = None,\n        title: str | None = None,\n        author: str | None = None,\n        summary: str | None = None,\n        published_at: datetime | None = None,\n        image_url: str | None = None,\n        location: Literal['new', 'later', 'archive', 'feed'] = 'new',\n        saved_using: str | None = None,\n        tags: list[str] = [],\n    ) -&gt; requests.Response:\n        '''\n        Create a document in Readwise Reader.\n\n        Args:\n            url: Document URL\n            html: Document HTML\n            should_clean_html: Whether to clean the HTML\n            title: Document title\n            author: Document author\n            summary: Document summary\n            published_at: Date and time the document was published\n            image_url: An image URL to use as cover image\n            location: Document location\n            saved_using: How the document was saved\n            tags: List of tags\n\n        Returns:\n            requests.Response\n        '''\n        data: dict[str, Any] = {\n            'url': url,\n            'tags': tags,\n            'location': location,\n        }\n\n        if html:\n            data['html'] = html\n\n        if should_clean_html is not None:\n            data['should_clean_html'] = should_clean_html\n\n        if title:\n            data['title'] = title\n\n        if author:\n            data['author'] = author\n\n        if summary:\n            data['summary'] = summary\n\n        if published_at:\n            data['published_at'] = published_at.isoformat()\n\n        if image_url:\n            data['image_url'] = image_url\n\n        if saved_using:\n            data['saved_using'] = saved_using\n\n        return self.post('/save/', data)\n</code></pre>"},{"location":"readwise-reader-api/#readwise.api.ReadwiseReaderClient.token","title":"<code>token = token</code>  <code>instance-attribute</code>","text":""},{"location":"readwise-reader-api/#readwise.api.ReadwiseReaderClient.url","title":"<code>url = 'https://readwise.io/api/v3'</code>  <code>instance-attribute</code>","text":""},{"location":"readwise-reader-api/#readwise.api.ReadwiseReaderClient.__init__","title":"<code>__init__(token)</code>","text":"<p>Readwise Reader Connector.</p> <p>Documentation for the Readwise Reader API can be found here: https://readwise.io/reader_api</p> <p>Parameters:</p>    Name Type Description Default     <code>token</code>  <code>str</code>  <p>Readwise Reader Connector token</p>  required      Source code in <code>readwise/api.py</code> <pre><code>def __init__(\n    self,\n    token: str,\n):\n    '''\n    Readwise Reader Connector.\n\n    Documentation for the Readwise Reader API can be found here:\n    https://readwise.io/reader_api\n\n    Args:\n        token: Readwise Reader Connector token\n    '''\n    self.token = token\n    self.url = 'https://readwise.io/api/v3'\n</code></pre>"},{"location":"readwise-reader-api/#readwise.api.ReadwiseReaderClient.create_document","title":"<code>create_document(url, html=None, should_clean_html=None, title=None, author=None, summary=None, published_at=None, image_url=None, location='new', saved_using=None, tags=[])</code>","text":"<p>Create a document in Readwise Reader.</p> <p>Parameters:</p>    Name Type Description Default     <code>url</code>  <code>str</code>  <p>Document URL</p>  required    <code>html</code>  <code>str | None</code>  <p>Document HTML</p>  <code>None</code>    <code>should_clean_html</code>  <code>bool | None</code>  <p>Whether to clean the HTML</p>  <code>None</code>    <code>title</code>  <code>str | None</code>  <p>Document title</p>  <code>None</code>    <code>author</code>  <code>str | None</code>  <p>Document author</p>  <code>None</code>    <code>summary</code>  <code>str | None</code>  <p>Document summary</p>  <code>None</code>    <code>published_at</code>  <code>datetime | None</code>  <p>Date and time the document was published</p>  <code>None</code>    <code>image_url</code>  <code>str | None</code>  <p>An image URL to use as cover image</p>  <code>None</code>    <code>location</code>  <code>Literal['new', 'later', 'archive', 'feed']</code>  <p>Document location</p>  <code>'new'</code>    <code>saved_using</code>  <code>str | None</code>  <p>How the document was saved</p>  <code>None</code>    <code>tags</code>  <code>list[str]</code>  <p>List of tags</p>  <code>[]</code>     <p>Returns:</p>    Type Description      <code>requests.Response</code>  <p>requests.Response</p>     Source code in <code>readwise/api.py</code> <pre><code>def create_document(\n    self,\n    url: str,\n    html: str | None = None,\n    should_clean_html: bool | None = None,\n    title: str | None = None,\n    author: str | None = None,\n    summary: str | None = None,\n    published_at: datetime | None = None,\n    image_url: str | None = None,\n    location: Literal['new', 'later', 'archive', 'feed'] = 'new',\n    saved_using: str | None = None,\n    tags: list[str] = [],\n) -&gt; requests.Response:\n    '''\n    Create a document in Readwise Reader.\n\n    Args:\n        url: Document URL\n        html: Document HTML\n        should_clean_html: Whether to clean the HTML\n        title: Document title\n        author: Document author\n        summary: Document summary\n        published_at: Date and time the document was published\n        image_url: An image URL to use as cover image\n        location: Document location\n        saved_using: How the document was saved\n        tags: List of tags\n\n    Returns:\n        requests.Response\n    '''\n    data: dict[str, Any] = {\n        'url': url,\n        'tags': tags,\n        'location': location,\n    }\n\n    if html:\n        data['html'] = html\n\n    if should_clean_html is not None:\n        data['should_clean_html'] = should_clean_html\n\n    if title:\n        data['title'] = title\n\n    if author:\n        data['author'] = author\n\n    if summary:\n        data['summary'] = summary\n\n    if published_at:\n        data['published_at'] = published_at.isoformat()\n\n    if image_url:\n        data['image_url'] = image_url\n\n    if saved_using:\n        data['saved_using'] = saved_using\n\n    return self.post('/save/', data)\n</code></pre>"},{"location":"readwise-reader-api/#readwise.api.ReadwiseReaderClient.get","title":"<code>get(endpoint, params={})</code>","text":"<p>Make a GET request to the Readwise Reader API.</p> <p>Parameters:</p>    Name Type Description Default     <code>endpoint</code>  <code>str</code>  <p>API endpoints</p>  required    <code>params</code>  <code>dict</code>  <p>Query parameters</p>  <code>{}</code>     <p>Returns:</p>    Type Description      <code>requests.Response</code>  <p>requests.Response</p>     Source code in <code>readwise/api.py</code> <pre><code>def get(self, endpoint: str, params: dict = {}) -&gt; requests.Response:\n    '''\n    Make a GET request to the Readwise Reader API.\n\n    Args:\n        endpoint: API endpoints\n        params: Query parameters\n\n    Returns:\n        requests.Response\n    '''\n    logging.debug(f'Getting \"{endpoint}\" with params: {params}')\n    return self._request('GET', endpoint, params=params)\n</code></pre>"},{"location":"readwise-reader-api/#readwise.api.ReadwiseReaderClient.post","title":"<code>post(endpoint, data={})</code>","text":"<p>Make a POST request to the Readwise Reader API.</p> <p>Parameters:</p>    Name Type Description Default     <code>endpoint</code>  <code>str</code>  <p>API endpoints</p>  required    <code>data</code>  <code>dict</code>  <p>Request body</p>  <code>{}</code>     <p>Returns:</p>    Type Description      <code>requests.Response</code>  <p>requests.Response</p>     Source code in <code>readwise/api.py</code> <pre><code>def post(self, endpoint: str, data: dict = {}) -&gt; requests.Response:\n    '''\n    Make a POST request to the Readwise Reader API.\n\n    Args:\n        endpoint: API endpoints\n        data: Request body\n\n    Returns:\n        requests.Response\n    '''\n    url = self.url + endpoint\n    logging.debug(f'Posting \"{url}\" with data: {data}')\n    response = self._request('POST', endpoint, data=data)\n    response.raise_for_status()\n    return response\n</code></pre>"}]}